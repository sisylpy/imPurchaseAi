

function getAttrName(string){
  console.log("getartrrn-----------", string)
  if (string) {
    var string = string.toString(string);
    if(string.length > 3){

    string = string.substring(0, 3);
    string = string + "..."
    return string;
    }else{
      return string;
    }
    
  }
}

function getDifferentPrice(a){
  return Math.abs(a);

}

function getAttrDateString(string){
  if (string) {
    var string = string.toString(string);
    var  month = string.substring(5, 7);
   var monthFirst =  month.substring(0,1);
   if(monthFirst == '0'){
     month =  string.substring(6, 7);
   }
    var  date = string.substring(8, 10);

    return month + "月" + date + "日";
    
  }
}


function getGongli(a,b){
  var bbb  = a / 1000;
  return  bbb.toFixed(b);
}

function getPercent(a, b){
  var c = ((a/b) * 100).toFixed(1) ;
  return c;
}
function getProfitPercent(a,b){
  var c =(((b - a) / a) * 100 ).toFixed(1)
  return c;
}


function getAttrDate(string){
  if (string) {
    var string = string.toString(string);
    string = string.substring(5, 10);
  
    return string; 
  }
}


function getAttrFullTime(string){
  if (string) {
    var string = string.toString(string);
    string = string.substring(5, 16);
    return string; 
  }
}

function getAttrString(string, from, long){
  if (string) {
    console.log("orrstr=" , string)
    var string = string.toString(string);
    string = string.substring(from, long);
    console.log("==", string);
    return string; 

  }
}


function transferDateString(date){
  date =  date.substring(5);
  var str =  date.split("-");
  var dateString = ""
  if(str.length  == 2){
    var yue = str[0];
    var ri = str[1];
    yue  =  Number(yue);
    ri  = Number(ri);
    dateString = yue + "月" + ri +"日"
  }
  return  dateString ;
}

function getProducePercent(a,b){
  if(b !== 0){
    var  abc = (a / b * 100).toFixed(2);
    return  abc;
  }else{
    return 0;
  }
}


function transferDateTimeString(date){
  date =  date.substring(5);
  var str =  date.split("-");
  var time = str[1].split(" ");
  console.log(time)
  var dateString = ""
  if(str.length  == 2){
    var yue = str[0];
    var ri = time[0];
    var clock = time[1];
    yue  =  Number(yue);
    ri  = Number(ri);
    colock = Number(clock)
    dateString = yue + "月" + ri +"日" + " " + clock
  }
  return  dateString ;
}


function transferFullTimeString(date){
  date =  date.substring(0, 10);
  console.log("date" , date);
  var str =  date.split("-");
  var dateString = ""
    var nian = str[0];
    var yue = str[1];
    var ri = str[2];
    yue  =  Number(yue);
    ri  = Number(ri);
    dateString = nian + "年" +  yue + "月" + ri +"日" 
  
  return  dateString ;
}


function getCompareTime(startTime, endTime){
  if(startTime && endTime){
 var  endTimeFormat =endTime.replace(getRegExp('-','g'),'/');
  var endTimeDown = Date.parse(getDate(endTimeFormat)); 
  var  startTimeFormat =startTime.replace(getRegExp('-','g'),'/');
  var startTimeDown = Date.parse(getDate(startTimeFormat)); 
  var  thisResult =  endTimeDown -  startTimeDown;
     thisResult =  Math.floor(thisResult / 1000 / 60 / 60)
  
  return thisResult;

  }

  
}

function changeDateStyleDot(dateStr){

  return  dateStr.split("-").join(".");;
}



function getRestTime(endTime, startTime){
  if(startTime && endTime){
 var  endTimeFormat =endTime.replace(getRegExp('-','g'),'/');
  var endTimeDown = Date.parse(getDate(endTimeFormat)); 
  var  startTimeFormat =startTime.replace(getRegExp('-','g'),'/');
  var startTimeDown = Date.parse(getDate(startTimeFormat)); 
  var  thisResult =  endTimeDown -  startTimeDown;
     thisResult =  Math.floor(thisResult / 1000 / 60 / 60)
  
  return thisResult;

  }

  
}


function transferCouponTimeString(date){
  date =  date.substring(5);
  var str =  date.split("-");
  var time = str[1].split(" ");
  console.log(time)
  var dateString = ""
  if(str.length  == 2){
    var yue = str[0];
    var ri = time[0];
    var clock = time[1];
    yue  =  Number(yue);
    ri  = Number(ri);
    clock =  clock.substring(0,5);
    colock = Number(clock);
    console.log("colockcolockcolock=",colock)
    dateString = yue + "月" + ri +"日" + " " + clock
  }
  return  clock ;
}


function transferCouponDateString(date){
  date =  date.substring(5);
  var str =  date.split("-");
  var time = str[1].split(" ");
  console.log(time)
  var dateString = ""
  if(str.length  == 2){
    var yue = str[0];
    var ri = time[0];
    var clock = time[1];
    yue  =  Number(yue);
    ri  = Number(ri);
    clock =  clock.substring(0,5);
    colock = Number(clock);
    console.log("colockcolockcolock=",colock)
    dateString = yue + "月" + ri +"日" 
  }
  return  dateString ;
}




module.exports = {
  getGongli:getGongli,
  getPercent: getPercent,
  getProfitPercent:getProfitPercent,
  getAttrName: getAttrName,
  getAttrDate: getAttrDate,
  getAttrFullTime: getAttrFullTime,
  transferDateString: transferDateString,
  transferDateTimeString: transferDateTimeString,
  transferFullTimeString: transferFullTimeString,
  getAttrString: getAttrString,
  getAttrDateString: getAttrDateString,
  getProducePercent: getProducePercent,
  getCompareTime: getCompareTime,
  getRestTime: getRestTime,
  getDifferentPrice: getDifferentPrice,
  changeDateStyleDot: changeDateStyleDot,
  transferCouponTimeString: transferCouponTimeString,
  transferCouponDateString: transferCouponDateString,

}