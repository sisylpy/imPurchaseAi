<import src='../../../../template/billPay/billPay.wxml' />

<wxs src="../../../../utils/fn.wxs" module="tool" />

<view class="flex-column">
  <view class="top_img_fixed flex-row" style="width: 100%; height: 110rpx; line-height: 110rpx; padding-top: {{statusBarHeight}}rpx; ">
    <image src="../../../../images/back-2.png" class="back_icon" bindtap="toBack"></image>
    <text class="top_bar_title">账单</text>
  </view>
  <image src="../../../../images/top.png" style="width: 100%; height: {{110 + statusBarHeight}}rpx;"></image>
</view>


<view class="flex-column">
 <!-- emptyView -->
 <view class="{{arr.length == 0  ? 'show' : 'hide'}}" style="height: {{windowHeight - 260}}rpx; text-align:center;">
        <view class="normal  empty_view">
          <view class="flex-column-center">
            <image class="empty_image" src="../../../../images/file-common.png"></image>
            <text class="big">现在没有账单</text>
            <text class="small gray with-tb-padding"></text>
          </view>
        </view>
      </view>
      <!-- ./emptyView -->    

    <view class="flex-row  p-20 border-bottom bg-white font-md" wx:for="{{arr}}" wx:for-item="item" wx:for-index="index" style="width: {{windowWidth - 40}}rpx; ">
     
          <view class=" margin-right" >
            <switch type="checkbox" checked="{{item.isSelect}}" bindchange="selectBill" data-index="{{index}}"  />
          </view>
        
     
      <view class="flex-row-between" hover-class="hover" bindtap="openBatchDetail" data-item="{{item}}" style="width: {{windowWidth - 100}}rpx;">
        <view class="flex-row">
          <view class="flex-row ">
            <text class="mr-20">{{index + 1}}.</text>
             <view class="flex-column">
              <view class="">{{tool.getAttrDate(item.gbDpbDate)}} {{item.gbDpbPurchaseWeek}} </view>
            <view class="font-xs text-secondary">{{item.gbDpbTime}}</view>
             </view>
          
          </view>
          
        </view>
        <view class="flex-row">
            <text class="">{{item.gbDpbSubtotal}}元</text>
            <image src="../../../../images/arrow-right-3.png" class="icon with-lr-padding"></image>
          </view>
      </view>

     



    </view>

</view>





<view class="overlay {{isTishi ? 'show' : 'hide'}}">

  <view class="body  bg-white" style="width: {{windowWidth - 100}}rpx;">
    <view class="mb-30  flex-column-center">

      <view class="tishiView" style="width:{{windowWidth/5}}rpx; height:{{windowWidth/5}}rpx; margin-top:-{{windowWidth/10 + 10}}rpx; z-index: 9999;border-radius: 50%;">
        <image src="../../../../images/aixin.png" class="tishi_icon" style="width:{{windowWidth/5 -80}}rpx; height:{{windowWidth/5 - 80}}rpx;  border-radius: 50%; margin-top:40rpx; margin-left: 40rpx;">
        </image>
      </view>

      <view class="flex-column-center sentence">
        <text class="small">客户已完成付款，结账确认以后</text>
        <text class="normal">订单状态不可修改！</text>
      </view>
      <view class="p-20 flex-row-between " bindtap="closeMask" style="width:{{windowWidth - 200}}rpx; ">
        <view class="half-row flex-column-center">
          <text class="border_btn bg-light" bindtap="cancleSettle">取消</text>
        </view>
        <view class="half-row flex-column-center">
          <text class="border_btn bg-success" bindtap="settleAccount">确定</text>
        </view>
      </view>

    </view>

  </view>
</view>


<template is="billPay" data='{{selAmount:selAmount, total: total}}'></template>