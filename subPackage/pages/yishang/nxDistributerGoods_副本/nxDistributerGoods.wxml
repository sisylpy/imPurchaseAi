<view class="flex flex-column">

  
  <search-navbar style="height: {{navBarHeight}}rpx;" avatar="/images/back-gray.png" button-text="设置" bindnavbuttontap="toBack" bindtoSearchGoods="toSearchGoodsJJ"></search-navbar>

  <view class="flex-column pb-20 pt-10" wx:if="{{grandList.length > 0}}">

    <view class="flex-row-default">
      <view class="left">
        <scroll-view scroll-y="true" style="height: {{windowHeight - 300 - navBarHeight}};  " scroll-top="{{scrollLeftDis}}">
          <view class="left-item {{leftIndex == index ? 'left-active' : ''}}" wx:for="{{grandList}}" wx:key="nxDistributerFatherGoodsId" wx:for-item="grand" bindtap="changeGreatGrand" data-index="{{index}}" data-id="{{grand.nxDistributerFatherGoodsId}}" data-name="{{grand.nxDfgFatherGoodsName}}">
            <text class="font-xs">{{grand.nxDfgFatherGoodsName}}</text>
          </view>
        </scroll-view>
      </view>
      <view class="bg-white  pb-20 pt-20" style="padding-left: 20rpx;">
        <view class="flex-row-wrap" id="miltest">
          <view class="fatherGoods {{searchId == item.nxDistributerFatherGoodsId ? 'is-active' : ''}}" wx:for="{{fatherArr}}" style="width: {{windowWidth / 5}}rpx;" bindtap="_getTopFatherGoods" data-id="{{item.nxDistributerFatherGoodsId}}" data-name="{{item.nxDfgFatherGoodsName}}">
            {{item.nxDfgFatherGoodsName}}
          </view>
        </view>
        
        <scroll-view scroll-y="true" bindscrolltolower="onScrollToLower" scroll-with-animation style="width: {{windowWidth - 160}}rpx; height:  {{windowHeight - 200 - navBarHeight}}rpx; ">

          <view class="flex-row  pb-10 pt-10 border-bottom product-item" style="width: {{windowWidth - 150}}rpx; " wx:for="{{goodsList}}" wx:for-item="sons" wx:key="nxDistributerGoodsId" wx:for-index="goodsIndex">
                <view class="flex-row-default">
                  <image bindtap="showDialogBtn" data-item="{{sons}}" data-nxgoods="{{sons.nxGoodsEntity}}"  src="{{sons.nxDgGoodsFile !== null ? url + sons.nxDgGoodsFile : '/images/logo.jpg'}}" mode="aspectFill" class="url_item mr-20" />
                  <view class="flex-column" catch:tap="{{sons.nxDepartmentOrdersEntity == null ? 'applyGoods' : 'toEditApply'}}" data-order="{{sons.nxDepartmentOrdersEntity}}" data-item="{{sons}}" data-disgoods="{{sons.gbDistributerGoodsEntity}}"  data-index="{{goodsIndex}}" data-depgoods="{{sons.gbDistributerGoodsEntity.gbDepartmentDisGoodsEntity}}"  data-nxgoods="{{sons.nxGoodsEntity}}" hover-class="{{sons.nxDepartmentOrdersEntity == null ? 'hover' :''}}">
                    <view class="flex-row-between" style="width: {{windowWidth - 300}}rpx; ">
                      <view class="flex-row-wrap font-md" style="width: {{windowWidth - 300}}rpx; ">
                        <text class="font-xs" wx:if="{{sons.nxDgGoodsDetail !== null}}">{{sons.nxDgGoodsDetail}}</text>
                        <text class=" {{sons.nxDgGoodsBrand !== null && sons.nxDgGoodsBrand.length > 0 ? 'brand' : ''}}">{{sons.nxDgGoodsBrand !== null && sons.nxDgGoodsBrand.length > 0 ? sons.nxDgGoodsBrand : ''}}</text>
                        <text class="mr-10 font-sl font-bold">{{sons.nxDgGoodsName}}</text>
                        
                        <block wx:if="{{sons.nxDistributerAliasEntities.length > 0}}">
                        <text class="font-sm" wx:for="{{sons.nxDistributerAliasEntities}}" wx:for-item="alias">@{{alias.nxDaAliasName}}</text>       
                        </block>
                      </view>

                      <block wx:if="{{sons.nxDepartmentOrdersEntity !== null}}">
                        <view class="five-weight his_price {{sons.nxDepartmentOrdersEntity.nxDoPurchaseStatus > 2 ? 'is-gray' : ''}} ">{{sons.nxDepartmentOrdersEntity.nxDoQuantity}}{{sons.nxDepartmentOrdersEntity.nxDoStandard}}</view>
                      </block>
                    </view>
                  

                    <view class="flex-row ">
                      <view class="flex-row " style="width: {{windowWidth - 380}}rpx; ">
                        <view class="flex-row third-row" wx:if="{{sons.nxDgWillPrice !== '0.1'}}">
                          <text class="font-yuan">¥</text>
                          <text class="font-lg font-bold ">{{sons.nxDgWillPrice}}</text>
                          <text class="font-xs ">/{{sons.nxDgGoodsStandardname}}</text>
                          <block wx:if="{{sons.nxDgGoodsStandardWeight.length > 0}}">
                        <view class="" wx:if="{{sons.nxDgGoodsStandardname !== '斤'}}">
                          /({{sons.nxDgGoodsStandardWeight}}/{{sons.nxDgGoodsStandardname}})</view>
                      </block>

                     
                        </view>
                        <view class="flex-row third-row" wx:else="">待报价</view>
                      </view>

                      <block wx:if="{{sons.nxDepartmentOrdersEntity == null}}">
                        <view class="with-lr-padding" >
                          <view class="add_btn center-content flex-column-center">
                            <image src="/images/add-3.png" mode="aspectFill" class="btn_img" />
                          </view>
                        </view>
                      </block>

                    </view>

                    <!-- <view class="flex-row text-secondary" style="text-decoration: line-through" wx:if="{{sons.nxDepartmentOrdersEntity !== null && sons.nxDepartmentOrdersEntity.nxDoExpectPrice !== sons.nxDgWillPrice && sons.nxDgWillPrice !== '0.1'}}">
                      <text class="font-sm">¥</text>
                      <text class="font-lg ">{{sons.nxDepartmentOrdersEntity.nxDoExpectPrice}}</text>
                    </view> -->
                   

                    <!-- .... -->

                  </view>
                </view>
              </view>


              <view class="flex-column-center gray extremeSmall" style="height: 200rpx;" wx:if="{{totalPage < currentPage  || searchFather }}">
                "{{greatName}}"共{{goodsList.length}}个商品
              </view>


        </scroll-view>

      </view>

      <view>


      </view>

    </view>




  </view>

</view>


<view class='overlay {{showOperation ? "show" : "hiede"}}' catchtap="hideMask">

<view class=" bg-white" wx:if="{{deleteShow}}" style="margin-top:{{200 + navBarHeight}}rpx;margin-left: 50rpx; width:{{windowWidth - 100}}rpx;">
  <view class="flex-cloumn">

    <view class="weight_five  p-20 delBack" style="text-align: center;">
      <view class="p-20 font-md">删除订货</view>
    </view>
    <view class="flex-row p-20 normal">
      <view class="mr-20 p-20">{{itemDis.gbDgGoodsName}}</view>
      <view class="p-20">订货: {{applyItem.gbDoQuantity}}{{applyItem.gbDoStandard}}</view>
    </view>
  </view>

  <view class="flex-row" style="padding-bottom: 40rpx; margin-top: 20rpx;">
    <view class="p-20 half-row cancel-btn" style="margin-left: 5%; " bindtap="deleteNo" hover-class="hover">取消</view>
    <view class="p-20 half-row confirm-btn" bindtap="deleteYes" hover-class="hover" style="margin-left: 10%; ">确定</view>
  </view>

</view>


</view>




<myDismodalCashSingle show="{{show}}" bindconfirm="confirm" bindcancle="cancle" binddelApply="delApply" bindconfirmStandard="confirmStandard" applyStandardName="{{applyStandardName}}" applyNumber="{{applyNumber}}" applySubtotal="{{applySubtotal}}" applyRemark="{{applyRemark}}" editApply="{{editApply}}" maskHeight="{{maskHeight}}" expectPrice="{{expectPrice}}"  statusBarHeight="{{statusBarHeight}}"  windowWidth="{{windowWidth}}" bindchangeStandard="changeStandard" applyGoodsName="{{applyGoodsName}}" applyGoodsId="{{applyGoodsId}}" item="{{item}}" maskHeight="{{maskHeight > windowHeight ? maskHeight : windowHeight}}" applyStandardName="{{applyStandardName}}" applyNumber="{{applyNumber}}" canSave="{{canSave}}"   windowWidth="{{windowWidth}}" windowHeight="{{windowHeight}}"/>
<!-- 
<myDismodalCashSingle show="{{show}}" bindconfirm="confirm" bindcancle="cancle" binddelApply="delApply" bindconfirmStandard="confirmStandard" applyStandardName="{{applyStandardName}}" applyNumber="{{applyNumber}}" applySubtotal="{{applySubtotal}}" applyRemark="{{applyRemark}}" editApply="{{editApply}}" maskHeight="{{maskHeight}}" expectPrice="{{expectPrice}}" bindchangeStandard="changeStandard" applyGoodsName="{{applyGoodsName}}" applyGoodsId="{{applyGoodsId}}" item="{{itemDis}}" maskHeight="{{maskHeight > windowHeight ? maskHeight : windowHeight}}" applyStandardName="{{applyStandardName}}"   windowWidth="{{windowWidth}}" windowHeight="{{windowHeight}}"  statusBarHeight="{{statusBarHeight}}" /> -->




<myIndependentNx show="{{showInd}}" url="{{url}}" item="{{item}}" windowHeight="{{windowHeight}}" windowWidth="{{windowWidth}}" />

<cover-view class="modal-mask" bindtap="hideModal" wx:if="{{showModal}}"></cover-view>
<cover-view class="modal-dialog" wx:if="{{showModal}}">
  <cover-view class="modal-title">{{item.nxDgGoodsName}}</cover-view>
  <cover-view>{{url + item.nxDgGoodsFileLarge}}</cover-view>
  <cover-view class="modal-content">
    <!-- <cover-image wx:if="{{item.nxDgGoodsFileLarge.length > 0}}" src="{{url + item.nxDgGoodsFileLarge}}" class="img-full" style="height:auto; max-height: {{windowHeight / 3}}rpx;" mode="widthFix"></cover-image> -->
    <cover-image style="width: 400rpx; height: 500rpx;" src="{{url + item.nxDgGoodsFileLarge}}"></cover-image>
  </cover-view>

</cover-view>


<delWarnModal wx:if="{{showPopupWarn}}" type="{{popupType}}" warnContent="{{warnContent}}" bind:closeWarn="closeWarn" bind:confirmWarn="confirmWarn" />